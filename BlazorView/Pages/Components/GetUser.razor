@using BlazorView.Data
@using Newtonsoft.Json
@using BlazorView.Pages.Components


@inject FetchUserFromDb UserListingService
@inject ILogger<GetUser> Logger

    <SelectUser Users ="Users"/>



    @code {

        /*
        Fetch user from db
        */
        IEnumerable<User> Users = new List<User>();
        string UsersFromDb;

        protected override async Task OnInitializedAsync()
        {
            Logger.LogInformation("Getting users from Database, time: {time}", DateTimeOffset.Now);
            UsersFromDb = await UserListingService.FetchUser();
            Users = JsonConvert.DeserializeObject<IEnumerable<User>>(UsersFromDb);
        }

    }

