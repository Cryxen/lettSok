@using BlazorView.Data
@using Newtonsoft.Json
@using BlazorView.Pages.Components


@inject FetchUserFromDb UserListingService
@inject ILogger<GetUser> logger

    <SelectUser users ="users"/>



    @code {

        /*
        Fetch user from db
        */
        IEnumerable<User> users = new List<User>();
        string usersFromDb;

        protected override async Task OnInitializedAsync()
        {
            logger.LogInformation("Getting users from Database, time: {time}", DateTimeOffset.Now);
            usersFromDb = await UserListingService.FetchUser();
            users = JsonConvert.DeserializeObject<IEnumerable<User>>(usersFromDb);
        }

    }

